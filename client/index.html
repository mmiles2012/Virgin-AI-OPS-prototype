<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>AINO Aviation Intelligence Platform</title>
    <meta name="description" content="Advanced flight training simulator for Boeing 787 operations and emergency scenarios" />
    <style>
      :root {
        --background: 210 11% 98%;
        --foreground: 215 25% 27%;
        --card: 0 0% 100%;
        --card-foreground: 215 25% 27%;
        --popover: 0 0% 100%;
        --popover-foreground: 215 25% 27%;
        --primary: 220 91% 51%;
        --primary-foreground: 0 0% 100%;
        --secondary: 210 11% 96%;
        --secondary-foreground: 215 25% 27%;
        --muted: 210 11% 96%;
        --muted-foreground: 215 16% 47%;
        --accent: 210 11% 96%;
        --accent-foreground: 215 25% 27%;
        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 100%;
        --border: 215 12% 92%;
        --input: 215 12% 92%;
        --ring: 220 91% 51%;
        --chart-1: 220 91% 51%;
        --chart-2: 160 81% 40%;
        --chart-3: 30 80% 55%;
        --chart-4: 280 87% 47%;
        --chart-5: 340 75% 55%;
        --sidebar-background: 0 0% 100%;
        --sidebar-foreground: 215 25% 27%;
        --sidebar-primary: 220 91% 51%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 210 11% 96%;
        --sidebar-accent-foreground: 215 25% 27%;
        --sidebar-border: 215 12% 92%;
        --sidebar-ring: 220 91% 51%;
        --radius: 0.5rem;
      }

      .dark {
        --background: 224 71% 4%;
        --foreground: 213 31% 91%;
        --card: 224 71% 4%;
        --card-foreground: 213 31% 91%;
        --popover: 224 71% 4%;
        --popover-foreground: 213 31% 91%;
        --primary: 220 91% 51%;
        --primary-foreground: 220 9% 9%;
        --secondary: 215 28% 17%;
        --secondary-foreground: 213 31% 91%;
        --muted: 215 28% 17%;
        --muted-foreground: 217 11% 65%;
        --accent: 215 28% 17%;
        --accent-foreground: 213 31% 91%;
        --destructive: 0 63% 31%;
        --destructive-foreground: 213 31% 91%;
        --border: 215 28% 17%;
        --input: 215 28% 17%;
        --ring: 220 91% 51%;
        --chart-1: 220 91% 51%;
        --chart-2: 160 60% 45%;
        --chart-3: 30 80% 55%;
        --chart-4: 280 87% 47%;
        --chart-5: 340 75% 55%;
        --sidebar-background: 224 71% 4%;
        --sidebar-foreground: 213 31% 91%;
        --sidebar-primary: 220 91% 51%;
        --sidebar-primary-foreground: 220 9% 9%;
        --sidebar-accent: 215 28% 17%;
        --sidebar-accent-foreground: 213 31% 91%;
        --sidebar-border: 215 28% 17%;
        --sidebar-ring: 220 91% 51%;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 0;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background: hsl(var(--background));
        color: hsl(var(--foreground));
        overflow-x: hidden;
        overflow-y: auto;
        min-height: 100vh;
        -webkit-overflow-scrolling: touch;
      }

      #root {
        width: 100vw;
        min-height: 100vh;
        position: relative;
        display: flex;
        flex-direction: column;
      }

      /* Mobile and iPad specific fixes */
      @media screen and (max-width: 768px) {
        body {
          font-size: 14px;
        }
        
        #root {
          width: 100%;
          overflow-x: hidden;
        }
      }

      @media screen and (min-width: 768px) and (max-width: 1024px) {
        /* iPad specific styling */
        body {
          font-size: 15px;
        }
      }

      /* Ensure proper rendering on all devices */
      * {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
      }

      /* Fix for iOS Safari viewport issues */
      @supports (-webkit-touch-callout: none) {
        #root {
          min-height: -webkit-fill-available;
        }
      }

      /* Touch-friendly button styling */
      .touch-manipulation {
        touch-action: manipulation;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
      }

      /* Aviation specific mobile fixes */
      .aviation-panel {
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
      }

      /* Ensure proper scrolling on mobile */
      .aviation-scrollable {
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        scrollbar-color: rgba(59, 130, 246, 0.5) transparent;
      }

      .aviation-scrollable::-webkit-scrollbar {
        width: 4px;
      }

      .aviation-scrollable::-webkit-scrollbar-track {
        background: transparent;
      }

      .aviation-scrollable::-webkit-scrollbar-thumb {
        background: rgba(59, 130, 246, 0.5);
        border-radius: 2px;
      }

      /* Emergency mobile fixes for white screen */
      @media screen and (max-width: 768px) {
        body, html, #root {
          position: fixed !important;
          width: 100% !important;
          height: 100% !important;
          overflow: hidden !important;
          background: #1e3a8a !important; /* blue-900 fallback */
        }
        
        .w-full {
          width: 100% !important;
        }
        
        .min-h-screen {
          min-height: 100vh !important;
          height: 100vh !important;
        }
      }

      /* Aviation-specific styling */
      .aviation-panel {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        border: 1px solid #0f3460;
        border-radius: 8px;
      }

      .cockpit-display {
        background: radial-gradient(circle at center, #0a1428 0%, #051019 100%);
        border: 2px solid #1e3a8a;
        color: #60a5fa;
      }

      .emergency-alert {
        background: linear-gradient(45deg, #dc2626 0%, #ef4444 100%);
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Emergency mobile fallback -->
    <script>
      // Detect small mobile devices only (exclude iPads and tablets)
      function isSmallMobileDevice() {
        return (window.innerWidth < 640 && window.innerHeight < 800) || 
               /Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      }
      
      function showMobileFallback() {
        document.body.innerHTML = `
          <div style="
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, #1e3a8a, #1e40af);
            color: white;
            font-family: system-ui, -apple-system, sans-serif;
            padding: 20px;
            overflow: auto;
            z-index: 999999;
          ">
            <div style="text-align: center; margin-bottom: 30px;">
              <h1 style="font-size: 32px; margin: 0 0 10px 0; font-weight: bold;">AINO</h1>
              <p style="font-size: 18px; color: #bfdbfe; margin: 0 0 20px 0;">Aviation Intelligence Platform</p>
              
              <!-- Navigation Tabs -->
              <div style="
                display: flex;
                justify-content: center;
                gap: 8px;
                margin-bottom: 20px;
                flex-wrap: wrap;
              ">
                <button class="nav-tab" data-view="overview" onclick="updateView('overview')" style="
                  background: #3b82f6;
                  color: white;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  font-size: 14px;
                  cursor: pointer;
                  transition: all 0.2s;
                ">Overview</button>
                <button class="nav-tab" data-view="flights" onclick="updateView('flights')" style="
                  background: rgba(59, 130, 246, 0.1);
                  color: #93c5fd;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  font-size: 14px;
                  cursor: pointer;
                  transition: all 0.2s;
                ">Live Flights</button>
                <button class="nav-tab" data-view="fleet" onclick="updateView('fleet')" style="
                  background: rgba(59, 130, 246, 0.1);
                  color: #93c5fd;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  font-size: 14px;
                  cursor: pointer;
                  transition: all 0.2s;
                ">Fleet</button>
                <button class="nav-tab" data-view="weather" onclick="updateView('weather')" style="
                  background: rgba(59, 130, 246, 0.1);
                  color: #93c5fd;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  font-size: 14px;
                  cursor: pointer;
                  transition: all 0.2s;
                ">Weather</button>
                <button class="nav-tab" data-view="operations" onclick="updateView('operations')" style="
                  background: rgba(59, 130, 246, 0.1);
                  color: #93c5fd;
                  border: none;
                  padding: 8px 16px;
                  border-radius: 6px;
                  font-size: 14px;
                  cursor: pointer;
                  transition: all 0.2s;
                ">Operations</button>
              </div>
            </div>

            <div id="mobile-content">

            <div style="text-align: center;">
              <p style="color: #9ca3af; line-height: 1.6; margin-bottom: 20px;">
                Emergency interface active due to React loading issue. 
                This provides core AINO aviation monitoring functionality.
              </p>
              <button onclick="window.location.reload()" style="
                background: #3b82f6;
                color: white;
                border: none;
                border-radius: 6px;
                padding: 15px 30px;
                font-size: 16px;
                cursor: pointer;
                touch-action: manipulation;
              ">Refresh Platform</button>
            </div>
          </div>
        `;
        
        // Initialize with overview content
        setTimeout(() => {
          updateView('overview');
        }, 100);
        
        // Make updateView function globally available
        window.updateView = updateView;
      }
      
      // Make function globally available
      window.showMobileFallback = showMobileFallback;
      
      // Universal fallback - activate on any device if React fails to load
      setTimeout(() => {
        // Check if React app loaded properly
        const rootElement = document.querySelector('#root');
        const hasContent = rootElement && rootElement.innerHTML.trim() && 
                          rootElement.innerHTML !== '<div></div>' && 
                          rootElement.children.length > 0;
        
        if (!hasContent) {
          console.log('React failed to load, activating emergency interface');
          showMobileFallback();
        } else {
          console.log('React loaded successfully');
        }
      }, 3000); // Give React 3 seconds to load
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
